<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}">
    <title>Page {{session['page_no']}}</title>
</head>

<body>
    <div class="container-fluid">
        <div class="row bg-1 header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10">

                    </div>

                    <div class="col-lg-2">
                        <h5 class="text-white text-center">Page {{session['page_no']}}</h5>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            {# new changes here           #}
            <div class="col-lg-2" style="margin-top: 26px;">
                <div class="fixed-logo">
                    <img src="{{url_for('static',filename='images/Nivriti new logo.jpeg')}}" alt="" style="max-height:75px;width:100%;">
                </div>
            </div>
            <div class="col-lg-9">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{{url_for('signin')}}">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Initial Description of the Challenge</li>
                    </ol>
                </nav>
            </div>
            <div class="col-lg-1" style="margin-top: 33px;">
                <a href="" data-toggle="modal" data-target="#exampleModal">
                    <button type="submit" formaction="/user" formmethod="POST" class="btn btn-bg btn-primary"> Help </button>
                </a>
            </div>
            {# new changes here           #}
        </div>
    </div>
    <!-- header -->
    <!-- section -->
    <section>
        <div class="container">
            <div class="row mb-20">
                <div class="col-lg-6">
                 
                    <p class="big-bold-text color1">TASK ID : {{session['user']['problems'][session['id']]['problem_id']}}</p>
                </div>
                <div class="col-lg-6">
                    <form class="form-inline" action="/second" method="POST">
                        <label for="Prob" class="big-bold-text color1 mr-sm-2">TASK NAME </label>
                        <input type="text" class="form-control" placeholder=" " value="{{session['user']['problems'][session['id']]['problem_name']}}" name="prob_name" style="width: 60%;">
                    
                </div>
            </div>
			<form>
            <div class="row">
                <div class="col-lg-12">
                    <h4 class="highlight-text text-white mb-20  ">Initial Description of the Challenge</h4>
                </div>
              
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group">
                        <textarea onkeyup="mycounter()" class="form-control" style="font-size: 15px;font-weight: bold;" rows="8" maxlength="250" disabled>Explanation: 
> Please describe the specific issue, situation, goal or objective to be addressed.  
> Please provide details for understanding the scope and context. 
> Clarify vague or ambiguous terms (e.g., always, never, impossible, very, too)
> Description is limited to 250 characters (including blank spaces).

Please click “Help” button for additional information and examples.
                            </textarea>
                        <textarea onkeyup="mycounter()" class="form-control" rows="5" id="answer" maxlength = "250" placeholder="Enter answer here(Limit 250 character)" name="problem_desc">{{session['user']['problems'][session['id']]['initial_desc']}}</textarea>
                        <span id="counter"></span>
                    </div>
                </div>
                <div class="col-lg-12 text-center">
                    <button type="submit"  formaction="/" formmethod="POST"  class="btn btn-sm btn-primary"> <i class="fa fa-angle-double-left" aria-hidden="true"></i> BACK</a>
                    <button type="submit"   onsubmit="return confirm('Do you want to save your changes before moving away from this page?')" formaction="/second_db" formmethod="POST" class="btn btn-md btn-primary">SAVE</a>
                    <button type="submit" formaction="/second" formmethod="POST"  class="btn btn-sm btn-primary">NEXT <i class="fa fa-angle-double-right" aria-hidden="true"></i> </a>
                    
                    </form>
                    {#  new change here                      #}
                    <button style="position:absolute;bottom: 5%;left:1%;"formaction="/return_s" formmethod="post"  type="submit" class="btn btn-md btn-primary">Log Out</button>
                </div>
                
				</form>
            </div>
        </div>
    </section>

    <!-- popup -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">

                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    <p> Additional Information and Examples: <br>
			    Example #1:<br>
			    In our organization, people are leaving in droves. New hires don’t stay for more than 12 to 18 months before putting in their papers. We need to figure out how to retain our employees.<br>
			    Example #2:<br>
			    Our company is unable to get repeat business on a regular basis. Customers buy from us once, then don’t return. We are also having difficulty getting new customers.<br>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- popup end -->

    <script>
        let isSaved = false; // Flag to track if the data is saved

        // Event listener for the Save button
        document.querySelector('button[type="submit"][formaction="/second_db"]').addEventListener('click', function() {
            isSaved = true; // Set to true when Save button is clicked
        });

        // Event listener for the Next button
        document.querySelector('button[type="submit"][formaction="/second"]').addEventListener('click', function(event) {
            if (!isSaved) {
                // If not saved, prevent the form submission and show a prompt
                event.preventDefault();
                alert("Please save your changes before moving to the next page.");
            }
        });

        // Optional: Check if the user tries to navigate away without saving
        window.onbeforeunload = function() {
            if (!isSaved) {
                return "You have unsaved changes. Do you want to leave without saving?";
            }
        };

        // Counter for remaining characters
        function mycounter(){
            const currentLength = 250 - document.getElementById('answer').value.length;
            const counterEle = document.getElementById('counter');
            counterEle.innerHTML = `Characters Left : ${currentLength}`;
        }

        window.onload = mycounter;
    </script>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>

</html>
